<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.4.1.min.js"></script>


<dom-module id="morris-donut-chart">
    <template>
        <style include="">
            :host {
                width: 100%;
                height: 100px;
                text-align: center;
                position: relative;
                overflow: auto;
            }
            .big{
                height: 100px;
                overflow: auto;
            }

        </style>
        <div class="big">
            Morris component
            <div id="donut-example"></div>
        </div>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'morris-donut-chart',
        properties: {
            elements: String,
            pressed: {
                type: Boolean,
                value: false,
                notify: true,
                reflectToAttribute: true
            }
        },
        listeners: {
            'tap': 'toggle'
        },
        toggle: function() {
            this.pressed = !this.pressed;
        },
        attached: function() {
            console.debug(this['is'], "ready!;" );

            // make AJAX REQUEST
            this.data =  [
                {"value": 60, "label": "Opened"},
                {"value": 25, "label": "Visit website"},
                {"value": 10, "label": "Registered"},
                {"value": 5, "label": "Deleted"}
            ]

//            Morris.Donut({
//                element: 'widgetDoughnutM',
//                resize: true,
//                data: this.data,
//                formatter: function (x) { return x + "%"}
//            }).on('click', function(i, row){
//                console.log(i, row);
//            });

            Morris.Donut({
                element: 'donut-example',
                data: [
                    {label: "Download Sales", value: 12},
                    {label: "In-Store Sales", value: 30},
                    {label: "Mail-Order Sales", value: 20}
                ]
            });

        }
    });

</script>
